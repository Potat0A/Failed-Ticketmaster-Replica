{% extends "base.html" %}

{% block title %}Rewards{% endblock %}

{% block content %}
<div class="container">
    <h1>Welcome, {{ customer['name'] }}</h1>
    <p><strong>Your Points:</strong> {{ customer['points'] }}</p>

    <!-- Available Vouchers -->
    <h3>Available Vouchers</h3>
    {% if vouchers %}
    <div class="row">
        {% for voucher in vouchers %}
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">{{ voucher['description'] }}</h5>
                    <p class="card-text">Discount: {{ voucher['discount'] }}%</p>
                    <p class="card-text">Points Required: {{ voucher['points'] }}</p>
                    <p class="card-text">Code: {{ voucher['code'] }}</p>
                    <a href="{{ url_for('rewards_redeem', code=voucher['code']) }}"
                       class="btn btn-success {% if customer['points'] < voucher['points'] %}disabled{% endif %}">
                        Redeem
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p>No vouchers available at the moment.</p>
    {% endif %}

    <!-- Redeemed Vouchers -->
    <h3>Your Redeemed Vouchers</h3>
    {% if customer_vouchers %}
    <ul class="list-group">
        {% for voucher in customer_vouchers %}
        <li class="list-group-item">
            {{ voucher['description'] }} (Discount: {{ voucher['discount'] }}%, Code: {{ voucher['code'] }})
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>You haven't redeemed any vouchers yet.</p>
    {% endif %}
</div>
{% endblock %}
